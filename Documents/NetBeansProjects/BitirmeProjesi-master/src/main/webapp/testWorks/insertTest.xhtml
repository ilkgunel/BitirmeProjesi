<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <h:body>
        <ui:composition template="./../template/main_template.xhtml">

            <ui:define name="content">
                <h:form  enctype="multipart/form-data">
                    <div class="span12">
                        <h1>Test Insert</h1>			
                        <p:messages id="messages" showDetail="false"/>   
                        <div class="login-fields">                      
                            <div class="field" style="margin-top: 5px">
                                <h:outputLabel for="testContains" value="Test Contains:"/>
                                <p:fileUpload id="testContains" style="width: 100%"
                                              mode="simple"
                                              value="#{testControllerBean.uploadedFile}"
                                              styleClass="login"/>
                            </div> <!-- /field -->

                            <div class="field" style="margin-top: 7px;">
                                <h:outputLabel for="testLessonName" value="Test Lesson Name:"/>	
                                <p:selectOneMenu  id="testLessonName" style="width: 100%" effect="fade"
                                                  value="#{testControllerBean.test.testLessonName}"
                                                  required="true" requiredMessage="Test Lesson name can't be empty" 
                                                  styleClass="login">
                                    <f:selectItem itemLabel="Ders seçiniz" itemValue="-1"/>
                                    <f:selectItems value="#{testControllerBean.testLessonNameList}"
                                                   var="testLessonName" itemLabel="#{testLessonName.label}" itemValue="#{testLessonName.value}" />
                                    <p:ajax  event="valueChange" listener="#{testControllerBean.refreshTestNameList()}" 
                                             update="testName"/>
                                </p:selectOneMenu>
                            </div> <!-- /field -->


                            <div class="field" style="margin-top: 7px;">
                                <h:outputLabel for="testName" value="Test Name:"/>	
                                <p:selectOneMenu  id="testName" style="width: 100%"  effect="fade"
                                                  value="#{testControllerBean.test.testName}"
                                                  required="true" requiredMessage="Test Name name can't be empty" 
                                                  styleClass="login">
                                    <f:selectItem itemLabel="Test Adı seçiniz" itemValue="-1"/>
                                    <f:selectItems value="#{testControllerBean.testNameList}"
                                                   var="testName" itemLabel="#{testName.label}" itemValue="#{testName.value}" />
                                    <p:ajax event="valueChange" listener="#{testControllerBean.refreshTestTopicList()}"
                                            update="testTopic" />
                                </p:selectOneMenu>
                            </div> <!-- /field -->

                            <div class="field" style="margin-top: 7px;">
                                <h:outputLabel for="testTopic" value="Test Topic:"/>	
                                <p:selectOneMenu  id="testTopic" style="width: 100%"  effect="fade"
                                                  value="#{testControllerBean.test.testTopicName}"
                                                  required="true" requiredMessage="Test Topic name can't be empty" 
                                                  styleClass="login">
                                      <f:selectItem itemLabel="Test Konusu seçiniz" itemValue="-1"/>
                                    <f:selectItems value="#{testControllerBean.testTopicList}"
                                                   var="testTopic" itemLabel="#{testTopic.label}" itemValue="#{testTopic.value}" />
                                </p:selectOneMenu>
                            </div> <!-- /field -->


                            <div class="field" style="margin-top: 7px;">
                                <h:outputLabel for="testTeacherId" value="Test Teacher:"/>	
                                <p:selectOneMenu  id="testTeacherId"  value="#{testControllerBean.test.testTeacherId}"
                                                  converter="testTeacherIdConverter" style="width: 100%"   effect="none"
                                                  required="true" requiredMessage="Test Teacher can't be empty" styleClass="login">
                                   
                                    <f:selectItems value="#{testControllerBean.teacherList}"
                                                   var="teacher" itemLabel="#{teacher.teacherName}" itemValue="#{teacher}"/>
                                </p:selectOneMenu>
                            </div> <!-- /field -->


                        </div> <!-- /login-fields -->

                        <div class="login-actions" style="margin-top: 10px;float:right">
                            <p:commandButton styleClass="button btn btn-info btn-sm" 
                                             value="Save"  ajax="false" update="messages"
                                             action="#{testControllerBean.insertTestFromBean()}" icon="fa fa-plus">
                            </p:commandButton>
                        </div> <!-- .actions -->
                    </div>
                </h:form>
            </ui:define>

        </ui:composition>

    </h:body>
</html>
